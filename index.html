<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Full Moon Posting Scheduler</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        'primary': '#4f46e5', /* Indigo */
                        'secondary': '#10b981', /* Emerald */
                        'background': '#f9fafb',
                        'accent': '#f59e0b', /* Amber */
                        'danger': '#ef4444', /* Red */
                    },
                      screens: {
                        'sm': '640px',
                        'md': '768px',
                        // CUSTOM BREAKPOINT: Only collapse to 1 column below 768px
                        'lg': '992px', 
                        'xl': '1280px',
                    },
                }
            }
        }
    </script>
    <style>
        /* Custom styles for better textarea visibility */
        textarea {
            font-size: 0.875rem; /* text-sm */
            line-height: 1.5;
            resize: vertical;
        }
        #rawDescription {
            min-height: 200px; /* Adjusted for compactness */
        }
        #calendarOutput {
            min-height: 250px;
        }
        #tagsOnlyOutput {
            min-height: 150px; /* Increased height for 3b */
        }
        #defaultTagsInput {
            font-size: 0.8rem; /* Smaller font for global hashtags */
        }
        /* FIX: Active tab highlight with RED text AND explicit BG color */
        .tab-button.active {
            border-bottom: 4px solid #ef4444 !important; /* Red */
            color: #ef4444 !important; /* Red */
            font-weight: 600 !important;
            background-color: #f1f5f9 !important; /* light gray for contrast */
        }
        /* Aggressively compacting the list items in settings */
        .compact-list-item {
            padding-top: 0.15rem; /* Further reduced padding */
            padding-bottom: 0.15rem;
            font-size: 0.75rem; /* text-xs for list content */
        }
        .compact-list-item span {
            font-size: 0.75rem;
        }
        /* Specific width for date picker */
        .date-input-container input[type="date"] {
            width: 150px; 
            max-width: 150px;
        }
        .sortable-drag {
            opacity: 0.6;
            background-color: #f1f5f9; /* Blue-gray for drag visual feedback */
        }
        /* FIX: Settings column structure - Using fixed grid definition for 30/70 split, only collapsing below 768px */
        .settings-grid-container-custom {
            display: grid;
            grid-template-columns: 30% 70%;
            gap: 2rem; 
        }
        @media (max-width: 768px) {
            .settings-grid-container-custom {
                grid-template-columns: 1fr;
            }
        }
        
        /* FIX: Explicit background colors for visual distinction (using !important to bypass overrides) */
        .schedule-container { background-color: #eef2ff !important; /* Indigo-50 */ }
        /* Adjusted background colors */
        .settings-column-one-bg { background-color: white !important; }
        .settings-column-two-bg { background-color: white !important; }
        /* Bulk Upload gets its amber/accent border only */
        .bulk-upload-bg { background-color: #fffbeb !important; /* Amber-50 */ }
        .template-bg { background-color: #eef2ff !important; /* Indigo-50 */ }
        .tag-add-bg { background-color: #f0fff4 !important; /* Emerald-50 */ }


        /* Modal Styles */
        .modal {
            transition: opacity 0.3s ease-in-out;
            pointer-events: none;
            opacity: 0;
            z-index: 50;
        }
        .modal.active {
            pointer-events: auto;
            opacity: 1;
        }
        
        /* Collapsible Button Styling */
        .collapsible-btn {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            padding: 0.75rem 1rem;
            font-weight: 600;
            border-radius: 0.5rem;
            transition: background-color 0.2s;
        }

        /* Grouping style for reordering events */
        .event-group {
            border: 1px solid #ccc;
            padding: 10px;
            margin-bottom: 10px;
            background-color: #fff;
            border-radius: 8px;
        }
        
        /* === SCHEDULE COMPACTION STYLES === */
        /* Tighter padding on event cards */
        .scheduled-event-card {
            padding: 0.75rem !important; /* py-3 instead of py-4 */
            font-size: 0.8rem; /* text-sm reduced */
        }
        /* Smaller font for event header */
        .scheduled-event-card h3 {
            font-size: 1rem; /* text-base instead of lg */
        }
        .scheduled-event-card p {
            font-size: 0.75rem; /* text-xs */
        }
        /* Smaller textarea font and row padding */
        .scheduled-event-card textarea {
            font-size: 0.75rem; /* text-xs */
            padding: 0.3rem;
            line-height: 1.25;
        }
        /* Tighter button layout */
        .scheduled-event-card .flex-shrink-0 button {
            font-size: 0.7rem; /* text-xs */
            padding: 0.15rem 0.5rem;
        }
        .scheduled-event-card .text-sm {
            font-size: 0.75rem !important;
        }
        /* Tighter grid spacing */
        .scheduled-event-card .gap-2 {
            gap: 0.5rem;
        }
        /* Tighter padding for status buttons */
        .scheduled-event-card .flex-shrink-0 button {
            padding: 0.2rem 0.6rem;
            height: 24px;
        }
        /* Ensure event group header is still readable */
        .event-group h3 {
            font-size: 1.125rem; /* text-xl */
        }
    </style>
</head>
<body class="bg-background min-h-screen p-4 sm:p-8 font-sans">
    
    <!-- SUPABASE AND DRAG-N-DROP IMPORTS -->
    <script type="module">
        import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm';
        window.supabaseClient = { createClient };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
    
    <div class="max-w-7xl mx-auto">
        <header class="text-center mb-6 p-4 bg-white rounded-xl shadow-lg">
            <h1 class="text-3xl font-extrabold text-gray-900">Full Moon Week Posting</h1>
        </header>
        
        <!-- Tab Navigation -->
        <div class="flex border-b border-gray-200 mb-6 bg-white rounded-t-xl shadow-md">
            <button id="tab-editor-btn" onclick="showTab('editor')" class="tab-button active flex-1 py-3 text-center transition duration-150">
                <svg class="w-5 h-5 inline mr-2 align-text-bottom" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2"></path></svg>
                Event
            </button>
            <button id="tab-settings-btn" onclick="showTab('settings')" class="tab-button flex-1 py-3 text-center transition duration-150">
                <svg class="w-5 h-5 inline mr-2 align-text-bottom" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.525.323 1.144.38 1.724.161v-4.04z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                Settings
            </button>
            <button id="tab-scheduler-btn" onclick="showTab('scheduler')" class="tab-button flex-1 py-3 text-center transition duration-150">
                <svg class="w-5 h-5 inline mr-2 align-text-bottom" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h.01M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                Schedule
            </button>
             <button id="tab-calendar-btn" onclick="showTab('calendar')" class="tab-button flex-1 py-3 text-center transition duration-150">
                <svg class="w-5 h-5 inline mr-2 align-text-bottom" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h.01M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                Calendar
            </button>
            <button id="tab-history-btn" onclick="showTab('history')" class="tab-button flex-1 py-3 text-center transition duration-150">
                <svg class="w-5 h-5 inline mr-2 align-text-bottom" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                History
            </button>
        </div>

        <!-- MAIN EDITOR TAB -->
        <div id="tab-editor-content" class="tab-content">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                
                <!-- INPUT COLUMN (LEFT) -->
                <div class="space-y-6">
                    <!-- Structured Event Input -->
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                        <label class="block text-xl font-semibold text-gray-900 mb-4 flex items-center">
                            Event Details
                        </label>

                        <!-- EVENT TEMPLATE LOADER -->
                        <div class="mb-4">
                            <label for="eventTemplateSelect" class="block text-sm font-medium text-gray-700 mb-1">Load Event Template:</label>
                            <select id="eventTemplateSelect" onchange="loadEventTemplate()" class="w-full border border-gray-300 rounded-lg p-2 text-sm focus:ring-primary focus:border-primary transition duration-150">
                                <option value="">--- Select Event Template ---</option>
                            </select>
                        </div>

                        <div class="space-y-3">
                            <!-- DATE INPUT (DATEPICKER ONLY) -->
                            <div class="flex items-center date-input-container space-x-3">
                                <label for="inputIsoDate" class="flex-shrink-0 text-sm font-medium text-gray-700">ðŸ—“ Event Date:</label>
                                <input type="date" id="inputIsoDate" class="border border-gray-300 rounded-lg p-2 text-sm focus:ring-primary focus:border-primary transition duration-150">
                            </div>
                            
                            <input type="text" id="inputEventName" placeholder="ðŸŽ‰ EVENT: " class="w-full border border-gray-300 rounded-lg p-2 text-sm focus:ring-primary focus:border-primary transition duration-150" onblur="loadEventExtraTags()">
                            <input type="text" id="inputLocation" placeholder="ðŸ“ LOCATION: " class="w-full border border-gray-300 rounded-lg p-2 text-sm focus:ring-primary focus:border-primary transition duration-150">
                        </div>
                        
                        <div class="flex justify-between items-center mt-6 mb-2">
                             <label for="rawDescription" class="block text-xl font-semibold text-gray-900 flex items-center">
                                Full Description
                            </label>
                            <!-- INSERT SNIPPET BUTTON/MENU -->
                            <div class="relative inline-block text-left">
                                <button type="button" onclick="document.getElementById('snippetMenu').classList.toggle('hidden')" class="px-3 py-1 bg-gray-100 text-gray-700 rounded-lg text-xs hover:bg-gray-200 transition">
                                    Insert Snippet
                                </button>
                                <div id="snippetMenu" class="origin-top-right absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 hidden z-10">
                                    <div class="py-1" role="menu" aria-orientation="vertical" aria-labelledby="options-menu">
                                        <select id="editorSnippetSelect" onchange="insertSnippet()" class="w-full p-2 text-sm cursor-pointer hover:bg-gray-100">
                                            <option value="">--- Select Snippet ---</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <textarea id="rawDescription" class="w-full border border-gray-300 rounded-lg p-3 focus:ring-primary focus:border-primary transition duration-150" placeholder=""></textarea>

                        <label for="extraHashtagsInput" class="block text-sm font-medium text-gray-700 mt-4 mb-2">
                            Extra Hashtags (Comma-separated)
                        </label>
                        <input type="text" id="extraHashtagsInput" placeholder="Suggested tags for this event type will appear here." class="w-full border border-gray-300 rounded-lg p-2 text-sm focus:ring-primary focus:border-primary transition duration-150">
                    </div>
                    
                    <!-- File Mockup (Purpose Clarified) -->
                    <div class="bg-white p-6 rounded-xl shadow-lg">
                           <h2 class="text-xl font-semibold text-gray-900 mb-4 flex items-center">
                                Image/Video File Naming
                            </h2>
                        <!-- REMOVED FILE INPUT AND EXPLANATION -->
                        <button onclick="generateFileName()" class="mt-3 w-full py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition text-sm">
                            Generate Suggested Filename
                        </button>
                        <p id="fileNameOutput" class="text-xs text-gray-700 mt-2 break-all"></p>
                    </div>
                </div>

                <!-- OUTPUT & ACTION COLUMN (RIGHT) -->
                <div class="space-y-6">
                    
                    <!-- FIX: Action (Moved to Top of Output Column & shrunk buttons) -->
                    <div class="bg-indigo-50/50 p-4 rounded-xl shadow-lg flex flex-col sm:flex-row items-center justify-between">
                        <div id="statusMessage" class="mt-4 sm:mt-0 text-sm text-gray-600 w-full mb-3 sm:mb-0 text-center sm:text-left">Connecting to Supabase...</div>
                        <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4 w-full justify-end">
                            <button id="parseButton" onclick="handleClick(false)" class="w-full sm:w-auto px-4 py-2 bg-primary text-white font-bold rounded-full shadow-md hover:bg-indigo-600 transition duration-300 transform hover:scale-105 text-sm">
                                PARSE
                            </button>
                            <button id="saveScheduleButton" onclick="handleClick(true)" class="w-full sm:w-auto px-4 py-2 bg-accent text-white font-bold rounded-full shadow-md hover:bg-amber-600 transition duration-300 transform hover:scale-105 text-sm">
                                SAVE TO SCHEDULE
                            </button>
                        </div>
                    </div>

                    <!-- OUTPUT BOXES (Stacked) -->
                    <div class="space-y-4">
                        <!-- Post Text -->
                        <div class="bg-white p-6 rounded-xl shadow-lg">
                            <label for="calendarOutput" class="block text-xl font-semibold text-gray-900 mb-2 flex items-center">
                                Post/Reel Text
                            </label>
                            <textarea id="calendarOutput" onblur="updateTextOutput('calendarOutput')" class="w-full border border-gray-300 rounded-lg p-3 bg-white min-h-[250px]" placeholder="Formatted post data will appear here."></textarea>
                        </div>
                        
                        <!-- Story Tags -->
                        <div class="bg-white p-6 rounded-xl shadow-lg">
                            <label for="tagsOnlyOutput" class="block text-xl font-semibold text-gray-900 mb-2 flex items-center">
                                Story Tags
                            </label>
                            <textarea id="tagsOnlyOutput" onblur="updateTextOutput('tagsOnlyOutput')" class="w-full border border-gray-300 rounded-lg p-3 bg-gray-50 min-h-[150px]" placeholder="Only unique @tags, one per line, will appear here."></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- SETTINGS TAB (Layout Reverted to Screenshot Look) -->
        <div id="tab-settings-content" class="tab-content hidden">
            <!-- FIX: Grid with 30%/70% split, only collapsing to 1 column below 768px -->
            <div class="settings-grid-container-custom">
                
                <!-- Column 1: Tags, List, New Entry, Bulk Import (30% width) -->
                <div class="space-y-6">
                    <div class="settings-column-one-bg p-6 rounded-xl shadow-lg border border-gray-300">
                        <h2 class="text-xl font-semibold text-gray-900 mb-4 flex items-center">
                            <svg class="w-6 h-6 mr-2 text-secondary" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m-4 12v-2m4-10v2m-4 8v2m4-10v2m-4 8v2m4-10v2m-4 8v2m4-10v2m-4 8v2m4-10v2"></path></svg>
                            Tags
                        </h2>
                        
                        <!-- Filter & Search (Top of Tags Box) -->
                        <div class="space-y-3 mb-4">
                            <select id="categoryFilter" onchange="renderNameMap()" class="p-2 border border-gray-300 rounded-lg text-sm w-full">
                                <option value="">All Categories</option>
                                <option value="DJ">DJ</option>
                                <option value="Venue">Venue</option>
                                <option value="Presenter">Presenter</option>
                                <option value="Artist">Artist</option>
                                <option value="Label">Label</option>
                                <option value="Other">Other</option>
                            </select>
                            <input type="text" id="nameSearch" oninput="renderNameMap()" placeholder="Search by Name or Tag..." class="w-full p-2 border border-gray-300 rounded-lg text-sm">
                        </div>

                        <!-- Current List Display (The visible tags list) -->
                        <div class="max-h-96 overflow-y-scroll border border-gray-300 rounded-lg p-3 bg-gray-50">
                            <ul id="databaseList" class="divide-y divide-gray-200">
                                <!-- List items rendered here -->
                            </ul>
                            <p id="emptyListMessage" class="text-center text-gray-500 italic hidden mt-4">No entries found matching your filter/search criteria.</p>
                        </div>

                    </div>
                    
                    <!-- Add New Entry (Matches screenshot look) -->
                    <div class="tag-add-bg p-6 rounded-xl shadow-lg border border-secondary/50">
                             <h2 class="text-lg font-semibold text-gray-900 mb-3">Add New Tag:</h2>
                            <div class="space-y-3">
                                <input type="text" id="newName" placeholder="Name (e.g., John Smith)" class="w-full border border-gray-300 rounded-lg p-2 text-sm focus:ring-secondary focus:border-secondary">
                                <input type="text" id="newTag" placeholder="Tag (e.g., @JohnSmithOfficial)" class="w-full border border-gray-300 rounded-lg p-2 text-sm focus:ring-secondary focus:border-secondary">
                                <select id="newCategory" class="w-full border border-gray-300 rounded-lg p-2 text-sm focus:ring-secondary focus:border-secondary">
                                    <option value="DJ">DJ</option>
                                    <option value="Venue">Venue</option>
                                    <option value="Presenter">Presenter</option>
                                    <option value="Artist">Artist</option>
                                    <option value="Label">Label</option>
                                    <option value="Other">Other</option>
                                </select>
                                <button onclick="addNameMapEntry()" class="w-full py-2 bg-secondary text-white font-bold rounded-lg hover:bg-emerald-600 transition duration-200">
                                    Save
                                </button>
                                <p id="addStatus" class="text-xs mt-1"></p>
                            </div>
                    </div>
                        
                    <!-- Bulk Upload (Matches screenshot look) -->
                    <!-- FIX: Reverting background color to amber/yellow family for visual distinction and fixing tag -->
                    <div class="bulk-upload-bg p-6 rounded-xl shadow-lg border border-accent/50">
                             <h2 class="text-lg font-semibold text-gray-900 mb-3">Bulk Tag Database Import</h2>
                            <!-- FIX: Reverted description to include Tab-separated values -->
                            <p class="text-xs text-gray-700">Paste raw spreadsheet data (Name, @Tag, Category) below, or JSON, to merge with the cloud list.</p>
                            <button onclick="copyInitialInstaMap()" class="mt-3 px-3 py-1 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition text-xs">Copy Default Map JSON</button>
                            <textarea id="bulkInstaMapInput" placeholder='Name	@Tag	Category (Tab-separated)' class="w-full border border-gray-300 rounded-lg p-2 text-xs min-h-[100px]"></textarea>
                            <button onclick="bulkImportTags()" class="w-full py-2 bg-accent text-white font-bold rounded-lg hover:bg-amber-600 transition duration-200 text-sm">
                                IMPORT TAGS
                            </button>
                            <p id="bulkStatus" class="text-xs mt-1"></p>
                    </div>

                </div>

                <!-- Column 2: Global Settings, Snippets, Templates (70% width) -->
                <div class="space-y-6 flex flex-col">
                    
                    <!-- Reusable Text Snippets -->
                    <div class="settings-column-two-bg p-6 rounded-xl shadow-lg border border-gray-300">
                        <h2 class="text-xl font-semibold text-gray-900 mb-4 flex items-center">
                            <svg class="w-6 h-6 mr-2 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path></svg>
                            Reusable Text Snippets
                        </h2>
                         <div class="space-y-3">
                            <select id="snippetSelect" onchange="loadSnippet()" class="w-full border border-gray-300 rounded-lg p-2 text-sm">
                                <option value="">--- Load Snippet ---</option>
                            </select>
                            <textarea id="snippetContent" onblur="saveSnippet()" placeholder="" class="w-full border border-gray-300 rounded-lg p-3 text-sm min-h-[180px]"></textarea>
                            <div class="flex space-x-2">
                                <input type="text" id="snippetName" placeholder="Snippet Name" class="flex-1 p-2 border border-gray-300 rounded-lg text-sm">
                                <button onclick="saveSnippet()" class="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition text-sm">Save</button>
                            </div>
                            <p id="snippetStatus" class="text-xs mt-1"></p>
                        </div>
                    </div>

                    <!-- Global Default Hashtags (Moved to the bottom of the second column) -->
                    <div class="settings-column-two-bg p-6 rounded-xl shadow-lg border border-gray-300">
                        <h2 class="text-xl font-semibold text-gray-900 mb-4 flex items-center">
                            <svg class="w-6 h-6 mr-2 text-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>
                            Global Default Hashtags
                        </h2>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Tags added to all events. (Comma-separated)</label>
                        <textarea id="defaultTagsInput" onblur="saveGlobalHashtags()" class="w-full border border-gray-300 rounded-lg p-3 focus:ring-accent focus:border-accent transition duration-150" placeholder=""></textarea>
                         <p id="globalTagsStatus" class="text-xs mt-1"></p>
                    </div>

                </div>

            </div>
        </div>
        
        <!-- SCHEDULER TAB (NEW) -->
        <div id="tab-scheduler-content" class="tab-content hidden">
             <div class="schedule-container p-6 rounded-xl shadow-lg">
                <h2 class="text-2xl font-semibold text-gray-900 mb-4 flex items-center">
                    <svg class="w-7 h-7 mr-2 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    Upcoming Post Schedule
                </h2 >
                <div id="scheduledEventsContainer" class="space-y-4">
                    <!-- Events grouped by date for Sortable lists -->
                </div>
                <p id="emptyScheduleMessage" class="text-center text-gray-500 italic mt-8 hidden">No events currently scheduled.</p>
            </div>
        </div>

        <!-- CALENDAR SUMMARY TAB (NEW) -->
        <div id="tab-calendar-content" class="tab-content hidden">
            <div class="bg-white p-6 rounded-xl shadow-lg">
                <h2 class="text-2xl font-semibold text-gray-900 mb-4 flex items-center">
                    <svg class="w-7 h-7 mr-2 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h.01M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                    Full Moon Calendar View
                </h
